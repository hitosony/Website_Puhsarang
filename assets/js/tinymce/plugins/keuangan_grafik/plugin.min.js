tinymce.PluginManager.add('keuangan_grafik', function( editor, url ) {
	editor.addButton( 'keuangan_grafik', {
		text: 'Grafik Keuangan',
		icon: false,
		type: 'menubutton',
		menu: [
		{
			text: 'Grafik Realisasi Pelaksanaan',
			onclick: function() {
				var url = BASE_URL + "index.php/keuangan/cek_tahun";
				$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        processData: true,
	        success: function (data) {
	        	editor.windowManager.open( {
							title: 'Select Data Realisasi Pelaksanaan',
							body: [
								{
									type   : 'listbox',
									name   : 'semester',
									label  : 'Semester',
									values : [
										{ text: 'Semester 1', value: '1' },
										{ text: 'Semester 2', value: '2' }
									],
			            value : '1' // Default Value
			          },
			          {
			          	type   : 'listbox',
			          	name   : 'tahun',
			          	label  : 'Tahun',
			          	values : data,
			          },
		          ],
		          onsubmit: function( e ) {
		          	editor.insertContent('[[grafik-RP-APBD,' + e.data.semester +','+ e.data.tahun +']]');
		          },
		          width: 400,
		          height: 140
			      } )
	        },
	        error: function (xhr, status, error) {
	          alert("Error! " + xhr.status + "\n" + error);
	          console.log(xhr);
	        }
	      });					
			}
		},
		{
			text: 'Grafik Realisasi Pendapatan',
			onclick: function() {
				var url = BASE_URL + "index.php/keuangan/cek_tahun";
				$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        processData: true,
	        success: function (data) {
	        	editor.windowManager.open( {
							title: 'Select Data Realisasi Pendapatan',
							body: [
								{
									type   : 'listbox',
									name   : 'semester',
									label  : 'Semester',
									values : [
										{ text: 'Semester 1', value: '1' },
										{ text: 'Semester 2', value: '2' }
									],
			            value : '1' // Default Value
			          },
			          {
			          	type   : 'listbox',
			          	name   : 'tahun',
			          	label  : 'Tahun',
			          	values : data,
			          },
		          ],
		          onsubmit: function( e ) {
		          	editor.insertContent('[[grafik-R-PD,' + e.data.semester +','+ e.data.tahun +']]');
		          },
		          width: 400,
		          height: 140
		        } )
	        },
	        error: function (xhr, status, error) {
	          alert("Error! " + xhr.status + "\n" + error);
	          console.log(xhr);
	        }
	      });					
			}
		},
		{
			text: 'Grafik Realisasi Belanja',
			onclick: function() {
				var url = BASE_URL + "index.php/keuangan/cek_tahun";
				$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        processData: true,
	        success: function (data) {
	        	editor.windowManager.open( {
							title: 'Select Data Realisasi Belanja',
							body: [
								{
									type   : 'listbox',
									name   : 'semester',
									label  : 'Semester',
									values : [
										{ text: 'Semester 1', value: '1' },
										{ text: 'Semester 2', value: '2' }
									],
			            value : '1' // Default Value
			          },
			          {
			          	type   : 'listbox',
			          	name   : 'tahun',
			          	label  : 'Tahun',
			          	values : data,
			          },
		          ],
		          onsubmit: function( e ) {
		          	editor.insertContent('[[grafik-R-BD,' + e.data.semester +','+ e.data.tahun +']]');
		          },
		          width: 400,
		          height: 140
		        } )
	        },
	        error: function (xhr, status, error) {
	          alert("Error! " + xhr.status + "\n" + error);
	          console.log(xhr);
	        }
	      });					
			}
		},
		{
			text: 'Grafik Realisasi Pembiayaan',
			onclick: function() {
				var url = BASE_URL + "index.php/keuangan/cek_tahun";
				$.ajax({
	        type: "GET",
	        url: url,
	        dataType: "json",
	        processData: true,
	        success: function (data) {
	        	editor.windowManager.open( {
							title: 'Select Data Realisasi Pembiayaan',
							body: [
								{
									type   : 'listbox',
									name   : 'semester',
									label  : 'Semester',
									values : [
										{ text: 'Semester 1', value: '1' },
										{ text: 'Semester 2', value: '2' }
									],
			            value : '1' // Default Value
			          },
			          {
			          	type   : 'listbox',
			          	name   : 'tahun',
			          	label  : 'Tahun',
			          	values : data,
			          },
		          ],
		          onsubmit: function( e ) {
		          	editor.insertContent('[[grafik-R-PEMDES,' + e.data.semester +','+ e.data.tahun +']]');
		          },
		          width: 400,
		          height: 140
		        } )
	        },
	        error: function (xhr, status, error) {
	          alert("Error! " + xhr.status + "\n" + error);
	          console.log(xhr);
	        }
	      });					
			}
		}
		]
	});
});